--- a/node_modules/@ai-sdk/anthropic/dist/index.js	2025-10-10 23:31:46
+++ b/node_modules/@ai-sdk/anthropic/dist/index.js	2025-10-10 23:49:16
@@ -609,6 +609,114 @@
                 const isLastPart = i2 === content.length - 1;
                 const cacheControl = (_d = getCacheControl(part.providerOptions)) != null ? _d : isLastPart ? getCacheControl(message.providerOptions) : void 0;
                 const output = part.output;
+                let handledServerToolResult = false;
+                if (part.toolName === "code_execution") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
+                  if (output.type !== "json") {
+                    warnings.push({
+                      type: "other",
+                      message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "code_execution_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "code_execution_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
+                    });
+                    handledServerToolResult = true;
+                  }
+                  const codeExecutionOutput = codeExecution_20250522OutputSchema.parse(output.value);
+                  anthropicContent.push({
+                    type: "code_execution_tool_result",
+                    tool_use_id: part.toolCallId,
+                    content: {
+                      type: codeExecutionOutput.type,
+                      stdout: codeExecutionOutput.stdout,
+                      stderr: codeExecutionOutput.stderr,
+                      return_code: codeExecutionOutput.return_code
+                    },
+                    cache_control: cacheControl
+                  });
+                  handledServerToolResult = true;
+                } else if (part.toolName === "web_fetch") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
+                  if (output.type !== "json") {
+                    warnings.push({
+                      type: "other",
+                      message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_fetch_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_fetch_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
+                    });
+                    handledServerToolResult = true;
+                  }
+                  const webFetchOutput = webFetch_20250910OutputSchema.parse(output.value);
+                  anthropicContent.push({
+                    type: "web_fetch_tool_result",
+                    tool_use_id: part.toolCallId,
+                    content: {
+                      type: "web_fetch_result",
+                      url: webFetchOutput.url,
+                      retrieved_at: webFetchOutput.retrievedAt,
+                      content: {
+                        type: "document",
+                        title: webFetchOutput.content.title,
+                        citations: webFetchOutput.content.citations,
+                        source: {
+                          type: webFetchOutput.content.source.type,
+                          media_type: webFetchOutput.content.source.mediaType,
+                          data: webFetchOutput.content.source.data
+                        }
+                      }
+                    },
+                    cache_control: cacheControl
+                  });
+                  handledServerToolResult = true;
+                } else if (part.toolName === "web_search") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
+                  if (output.type !== "json") {
+                    warnings.push({
+                      type: "other",
+                      message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_search_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_search_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
+                    });
+                    handledServerToolResult = true;
+                  }
+                  const webSearchOutput = webSearch_20250305OutputSchema.parse(output.value);
+                  anthropicContent.push({
+                    type: "web_search_tool_result",
+                    tool_use_id: part.toolCallId,
+                    content: webSearchOutput.map((result) => ({
+                      url: result.url,
+                      title: result.title,
+                      page_age: result.pageAge,
+                      encrypted_content: result.encryptedContent,
+                      type: result.type
+                    })),
+                    cache_control: cacheControl
+                  });
+                  handledServerToolResult = true;
+                }
+                if (handledServerToolResult) {
+                  continue;
+                }
                 let contentValue;
                 switch (output.type) {
                   case "content":
@@ -2470,4 +2578,4 @@
   anthropic,
   createAnthropic
 });
-//# sourceMappingURL=index.js.map
\ No newline at end of file
+//# sourceMappingURL=index.js.map
--- a/node_modules/@ai-sdk/anthropic/dist/index.mjs	2025-10-10 23:31:46
+++ b/node_modules/@ai-sdk/anthropic/dist/index.mjs	2025-10-10 23:49:30
@@ -592,6 +592,114 @@
                 const isLastPart = i2 === content.length - 1;
                 const cacheControl = (_d = getCacheControl(part.providerOptions)) != null ? _d : isLastPart ? getCacheControl(message.providerOptions) : void 0;
                 const output = part.output;
+                let handledServerToolResult = false;
+                if (part.toolName === "code_execution") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
+                  if (output.type !== "json") {
+                    warnings.push({
+                      type: "other",
+                      message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "code_execution_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "code_execution_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
+                    });
+                    handledServerToolResult = true;
+                  }
+                  const codeExecutionOutput = codeExecution_20250522OutputSchema.parse(output.value);
+                  anthropicContent.push({
+                    type: "code_execution_tool_result",
+                    tool_use_id: part.toolCallId,
+                    content: {
+                      type: codeExecutionOutput.type,
+                      stdout: codeExecutionOutput.stdout,
+                      stderr: codeExecutionOutput.stderr,
+                      return_code: codeExecutionOutput.return_code
+                    },
+                    cache_control: cacheControl
+                  });
+                  handledServerToolResult = true;
+                } else if (part.toolName === "web_fetch") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
+                  if (output.type !== "json") {
+                    warnings.push({
+                      type: "other",
+                      message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_fetch_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_fetch_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
+                    });
+                    handledServerToolResult = true;
+                  }
+                  const webFetchOutput = webFetch_20250910OutputSchema.parse(output.value);
+                  anthropicContent.push({
+                    type: "web_fetch_tool_result",
+                    tool_use_id: part.toolCallId,
+                    content: {
+                      type: "web_fetch_result",
+                      url: webFetchOutput.url,
+                      retrieved_at: webFetchOutput.retrievedAt,
+                      content: {
+                        type: "document",
+                        title: webFetchOutput.content.title,
+                        citations: webFetchOutput.content.citations,
+                        source: {
+                          type: webFetchOutput.content.source.type,
+                          media_type: webFetchOutput.content.source.mediaType,
+                          data: webFetchOutput.content.source.data
+                        }
+                      }
+                    },
+                    cache_control: cacheControl
+                  });
+                  handledServerToolResult = true;
+                } else if (part.toolName === "web_search") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
+                  if (output.type !== "json") {
+                    warnings.push({
+                      type: "other",
+                      message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_search_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_search_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
+                    });
+                    handledServerToolResult = true;
+                  }
+                  const webSearchOutput = webSearch_20250305OutputSchema.parse(output.value);
+                  anthropicContent.push({
+                    type: "web_search_tool_result",
+                    tool_use_id: part.toolCallId,
+                    content: webSearchOutput.map((result) => ({
+                      url: result.url,
+                      title: result.title,
+                      page_age: result.pageAge,
+                      encrypted_content: result.encryptedContent,
+                      type: result.type
+                    })),
+                    cache_control: cacheControl
+                  });
+                  handledServerToolResult = true;
+                }
+                if (handledServerToolResult) {
+                  continue;
+                }
                 let contentValue;
                 switch (output.type) {
                   case "content":
@@ -2452,4 +2560,4 @@
   anthropic,
   createAnthropic
 };
-//# sourceMappingURL=index.mjs.map
\ No newline at end of file
+//# sourceMappingURL=index.mjs.map
--- a/node_modules/@ai-sdk/anthropic/dist/internal/index.js	2025-10-10 23:31:46
+++ b/node_modules/@ai-sdk/anthropic/dist/internal/index.js	2025-10-10 23:49:46
@@ -602,6 +602,114 @@
                 const isLastPart = i2 === content.length - 1;
                 const cacheControl = (_d = getCacheControl(part.providerOptions)) != null ? _d : isLastPart ? getCacheControl(message.providerOptions) : void 0;
                 const output = part.output;
+                let handledServerToolResult = false;
+                if (part.toolName === "code_execution") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
+                  if (output.type !== "json") {
+                    warnings.push({
+                      type: "other",
+                      message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "code_execution_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "code_execution_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
+                    });
+                    handledServerToolResult = true;
+                  }
+                  const codeExecutionOutput = codeExecution_20250522OutputSchema.parse(output.value);
+                  anthropicContent.push({
+                    type: "code_execution_tool_result",
+                    tool_use_id: part.toolCallId,
+                    content: {
+                      type: codeExecutionOutput.type,
+                      stdout: codeExecutionOutput.stdout,
+                      stderr: codeExecutionOutput.stderr,
+                      return_code: codeExecutionOutput.return_code
+                    },
+                    cache_control: cacheControl
+                  });
+                  handledServerToolResult = true;
+                } else if (part.toolName === "web_fetch") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
+                  if (output.type !== "json") {
+                    warnings.push({
+                      type: "other",
+                      message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_fetch_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_fetch_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
+                    });
+                    handledServerToolResult = true;
+                  }
+                  const webFetchOutput = webFetch_20250910OutputSchema.parse(output.value);
+                  anthropicContent.push({
+                    type: "web_fetch_tool_result",
+                    tool_use_id: part.toolCallId,
+                    content: {
+                      type: "web_fetch_result",
+                      url: webFetchOutput.url,
+                      retrieved_at: webFetchOutput.retrievedAt,
+                      content: {
+                        type: "document",
+                        title: webFetchOutput.content.title,
+                        citations: webFetchOutput.content.citations,
+                        source: {
+                          type: webFetchOutput.content.source.type,
+                          media_type: webFetchOutput.content.source.mediaType,
+                          data: webFetchOutput.content.source.data
+                        }
+                      }
+                    },
+                    cache_control: cacheControl
+                  });
+                  handledServerToolResult = true;
+                } else if (part.toolName === "web_search") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
+                  if (output.type !== "json") {
+                    warnings.push({
+                      type: "other",
+                      message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_search_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_search_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
+                    });
+                    handledServerToolResult = true;
+                  }
+                  const webSearchOutput = webSearch_20250305OutputSchema.parse(output.value);
+                  anthropicContent.push({
+                    type: "web_search_tool_result",
+                    tool_use_id: part.toolCallId,
+                    content: webSearchOutput.map((result) => ({
+                      url: result.url,
+                      title: result.title,
+                      page_age: result.pageAge,
+                      encrypted_content: result.encryptedContent,
+                      type: result.type
+                    })),
+                    cache_control: cacheControl
+                  });
+                  handledServerToolResult = true;
+                }
+                if (handledServerToolResult) {
+                  continue;
+                }
                 let contentValue;
                 switch (output.type) {
                   case "content":
@@ -2412,4 +2520,4 @@
   anthropicTools,
   prepareTools
 });
-//# sourceMappingURL=index.js.map
\ No newline at end of file
+//# sourceMappingURL=index.js.map
--- a/node_modules/@ai-sdk/anthropic/dist/internal/index.mjs	2025-10-10 23:31:46
+++ b/node_modules/@ai-sdk/anthropic/dist/internal/index.mjs	2025-10-10 23:50:01
@@ -578,6 +578,114 @@
                 const isLastPart = i2 === content.length - 1;
                 const cacheControl = (_d = getCacheControl(part.providerOptions)) != null ? _d : isLastPart ? getCacheControl(message.providerOptions) : void 0;
                 const output = part.output;
+                let handledServerToolResult = false;
+                if (part.toolName === "code_execution") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
+                  if (output.type !== "json") {
+                    warnings.push({
+                      type: "other",
+                      message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "code_execution_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "code_execution_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
+                    });
+                    handledServerToolResult = true;
+                  }
+                  const codeExecutionOutput = codeExecution_20250522OutputSchema.parse(output.value);
+                  anthropicContent.push({
+                    type: "code_execution_tool_result",
+                    tool_use_id: part.toolCallId,
+                    content: {
+                      type: codeExecutionOutput.type,
+                      stdout: codeExecutionOutput.stdout,
+                      stderr: codeExecutionOutput.stderr,
+                      return_code: codeExecutionOutput.return_code
+                    },
+                    cache_control: cacheControl
+                  });
+                  handledServerToolResult = true;
+                } else if (part.toolName === "web_fetch") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
+                  if (output.type !== "json") {
+                    warnings.push({
+                      type: "other",
+                      message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_fetch_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_fetch_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
+                    });
+                    handledServerToolResult = true;
+                  }
+                  const webFetchOutput = webFetch_20250910OutputSchema.parse(output.value);
+                  anthropicContent.push({
+                    type: "web_fetch_tool_result",
+                    tool_use_id: part.toolCallId,
+                    content: {
+                      type: "web_fetch_result",
+                      url: webFetchOutput.url,
+                      retrieved_at: webFetchOutput.retrievedAt,
+                      content: {
+                        type: "document",
+                        title: webFetchOutput.content.title,
+                        citations: webFetchOutput.content.citations,
+                        source: {
+                          type: webFetchOutput.content.source.type,
+                          media_type: webFetchOutput.content.source.mediaType,
+                          data: webFetchOutput.content.source.data
+                        }
+                      }
+                    },
+                    cache_control: cacheControl
+                  });
+                  handledServerToolResult = true;
+                } else if (part.toolName === "web_search") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
+                  if (output.type !== "json") {
+                    warnings.push({
+                      type: "other",
+                      message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_search_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_search_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
+                    });
+                    handledServerToolResult = true;
+                  }
+                  const webSearchOutput = webSearch_20250305OutputSchema.parse(output.value);
+                  anthropicContent.push({
+                    type: "web_search_tool_result",
+                    tool_use_id: part.toolCallId,
+                    content: webSearchOutput.map((result) => ({
+                      url: result.url,
+                      title: result.title,
+                      page_age: result.pageAge,
+                      encrypted_content: result.encryptedContent,
+                      type: result.type
+                    })),
+                    cache_control: cacheControl
+                  });
+                  handledServerToolResult = true;
+                }
+                if (handledServerToolResult) {
+                  continue;
+                }
                 let contentValue;
                 switch (output.type) {
                   case "content":
@@ -2387,4 +2495,4 @@
   anthropicTools,
   prepareTools
 };
-//# sourceMappingURL=index.mjs.map
\ No newline at end of file
+//# sourceMappingURL=index.mjs.map
