--- a/node_modules/@ai-sdk/anthropic/dist/index.js
+++ b/node_modules/@ai-sdk/anthropic/dist/index.js
@@ -651,10 +651,20 @@
                 }
                 let handledServerToolResult = false;
                 if (part.toolName === "code_execution") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "code_execution_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "code_execution_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     handledServerToolResult = true;
                   } else {
@@ -676,10 +686,20 @@
                   }
                 }
                 if (part.toolName === "web_fetch") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_fetch_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_fetch_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     handledServerToolResult = true;
                   } else {
@@ -710,10 +730,20 @@
                   }
                 }
                 if (part.toolName === "web_search") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_search_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_search_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     handledServerToolResult = true;
                   } else {
@@ -852,10 +882,20 @@
               case "tool-result": {
                 if (part.toolName === "code_execution") {
                   const output = part.output;
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "code_execution_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "code_execution_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     break;
                   }
@@ -875,10 +915,20 @@
                 }
                 if (part.toolName === "web_fetch") {
                   const output = part.output;
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_fetch_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_fetch_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     break;
                   }
@@ -909,10 +959,20 @@
                 }
                 if (part.toolName === "web_search") {
                   const output = part.output;
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_search_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_search_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     break;
                   }
--- a/node_modules/@ai-sdk/anthropic/dist/index.mjs
+++ b/node_modules/@ai-sdk/anthropic/dist/index.mjs
@@ -634,10 +634,20 @@
                 }
                 let handledServerToolResult = false;
                 if (part.toolName === "code_execution") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "code_execution_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "code_execution_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     handledServerToolResult = true;
                   } else {
@@ -659,10 +669,20 @@
                   }
                 }
                 if (part.toolName === "web_fetch") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_fetch_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_fetch_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     handledServerToolResult = true;
                   } else {
@@ -693,10 +713,20 @@
                   }
                 }
                 if (part.toolName === "web_search") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_search_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_search_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     handledServerToolResult = true;
                   } else {
@@ -835,10 +865,20 @@
               case "tool-result": {
                 if (part.toolName === "code_execution") {
                   const output = part.output;
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "code_execution_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "code_execution_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     break;
                   }
@@ -858,10 +898,20 @@
                 }
                 if (part.toolName === "web_fetch") {
                   const output = part.output;
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_fetch_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_fetch_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     break;
                   }
@@ -892,10 +942,20 @@
                 }
                 if (part.toolName === "web_search") {
                   const output = part.output;
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_search_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_search_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     break;
                   }
--- a/node_modules/@ai-sdk/anthropic/dist/internal/index.js
+++ b/node_modules/@ai-sdk/anthropic/dist/internal/index.js
@@ -644,10 +644,20 @@
                 }
                 let handledServerToolResult = false;
                 if (part.toolName === "code_execution") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "code_execution_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "code_execution_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     handledServerToolResult = true;
                   } else {
@@ -669,10 +679,20 @@
                   }
                 }
                 if (part.toolName === "web_fetch") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_fetch_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_fetch_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     handledServerToolResult = true;
                   } else {
@@ -703,10 +723,20 @@
                   }
                 }
                 if (part.toolName === "web_search") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_search_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_search_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     handledServerToolResult = true;
                   } else {
@@ -845,10 +875,20 @@
               case "tool-result": {
                 if (part.toolName === "code_execution") {
                   const output = part.output;
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "code_execution_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "code_execution_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     break;
                   }
@@ -868,10 +908,20 @@
                 }
                 if (part.toolName === "web_fetch") {
                   const output = part.output;
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_fetch_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_fetch_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     break;
                   }
@@ -902,10 +952,20 @@
                 }
                 if (part.toolName === "web_search") {
                   const output = part.output;
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_search_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_search_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     break;
                   }
--- a/node_modules/@ai-sdk/anthropic/dist/internal/index.mjs
+++ b/node_modules/@ai-sdk/anthropic/dist/internal/index.mjs
@@ -620,10 +620,20 @@
                 }
                 let handledServerToolResult = false;
                 if (part.toolName === "code_execution") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "code_execution_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "code_execution_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     handledServerToolResult = true;
                   } else {
@@ -645,10 +655,20 @@
                   }
                 }
                 if (part.toolName === "web_fetch") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_fetch_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_fetch_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     handledServerToolResult = true;
                   } else {
@@ -679,10 +699,20 @@
                   }
                 }
                 if (part.toolName === "web_search") {
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_search_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_search_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     handledServerToolResult = true;
                   } else {
@@ -821,10 +851,20 @@
               case "tool-result": {
                 if (part.toolName === "code_execution") {
                   const output = part.output;
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "code_execution_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "code_execution_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     break;
                   }
@@ -844,10 +884,20 @@
                 }
                 if (part.toolName === "web_fetch") {
                   const output = part.output;
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_fetch_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_fetch_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     break;
                   }
@@ -878,10 +928,20 @@
                 }
                 if (part.toolName === "web_search") {
                   const output = part.output;
+                  const errorCode = output.type === "error-text" || output.type === "error-json" ? "provider_error" : "invalid_output";
                   if (output.type !== "json") {
                     warnings.push({
                       type: "other",
                       message: `provider executed tool result output type ${output.type} for tool ${part.toolName} is not supported`
+                    });
+                    anthropicContent.push({
+                      type: "web_search_tool_result",
+                      tool_use_id: part.toolCallId,
+                      content: {
+                        type: "web_search_tool_result_error",
+                        error_code: errorCode
+                      },
+                      cache_control: cacheControl
                     });
                     break;
                   }
